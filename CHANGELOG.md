# Changelog

所有重要的更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [Semantic Versioning](https://semver.org/lang/zh-CN/)。

## [2.1.0] - 2025-10-13

### Added 🎉
- **完整通知系统实现** - 企业级实时通知功能
  - **实时推送机制**：基于 SSE (Server-Sent Events) 的实时通知推送
  - **通知管理中心**：完整的通知列表界面，支持分页、过滤、搜索
  - **智能通知图标**：顶部导航栏实时显示未读数量和连接状态
  - **通知类型支持**：系统通知、会话提醒、统计报告、警告、成功、错误消息
  - **优先级管理**：4个优先级（低、普通、高、紧急）和相应的视觉样式
  - **批量操作**：支持批量标记已读、批量删除、全选/取消选择
  - **通知设置**：桌面通知、声音提醒、实时推送、自动刷新等配置选项

### 📖 帮助中心完善
- **全面内容更新**：帮助页面与README.md完全同步
  - 更新版本信息：v2.0.4 → v2.1.0
  - 新增用户认证系统详细介绍（JWT、BCrypt、多用户隔离）
  - 新增实时通知系统完整说明（SSE推送、通知管理）
  - 补充AES-256-GCM加密存储安全特性说明
- **快速开始指南优化**：
  - 添加"第一步：用户登录"说明
  - 包含默认管理员账户信息（admin/admin123）
  - 调整步骤顺序，符合实际使用流程
- **故障排查内容扩展**：
  - 新增认证问题解答（登录失败、Token过期）
  - 新增通知问题解答（收不到通知、通知不显示）
  - 新增数据库连接问题解决方案
- **功能特性列表更新**：
  - 增加用户认证、实时通知、企业级加密、帮助中心等新功能
  - 使用丰富的emoji图标，提升视觉效果
- **快速链接修复**：
  - 修复GitHub项目和问题反馈按钮无法跳转的问题
  - 添加正确的外部链接导航功能

### 🏗️ 技术架构
- **后端组件**：
  - `NotificationController` - RESTful API 接口
  - `NotificationService` - 业务逻辑处理层
  - `SseConnectionManager` - SSE 连接管理和心跳检测
  - `NotificationPublisher` - 异步通知发布服务
  - `NotificationMapper` - MyBatis 数据访问层
  - 完整的数据库表设计和索引优化

- **前端组件**：
  - `NotificationCenter` - 通知中心主页面
  - `NotificationIcon` - 顶部通知图标组件
  - `NotificationItem` - 单个通知项组件
  - `useNotifications` - React Hook 状态管理
  - `notificationSlice` - Redux Toolkit 状态管理
  - `notificationAPI.ts` - HTTP API 和 SSE 连接封装

### 🌐 用户体验
- **国际化支持**：完整的中英文翻译
- **响应式设计**：支持不同屏幕尺寸的设备
- **实时状态显示**：SSE 连接状态、未读数量实时更新
- **优雅的动画效果**：通知进入、删除、状态变更动画
- **无障碍访问**：符合 WCAG 标准的可访问性设计

### 🔧 集成功能
- **业务场景集成**：
  - 会话状态变更通知（启动、终止、错误）
  - Token 状态监控通知（失效、错误、健康警告）
  - Provider 配置变更通知（添加、更新、禁用）
  - 系统状态通知（启动、错误、配置导入导出）

- **通知辅助工具**：
  - `NotificationHelper` - 快速创建通知的工具类
  - `NotificationTemplates` - 预定义的通知模板库
  - 自动通知触发机制

### 🛠️ 开发体验
- **TypeScript 类型安全**：完整的类型定义和类型检查
- **代码质量**：符合 ESLint 和 Prettier 规范
- **错误处理**：完善的异常处理和用户友好的错误提示
- **性能优化**：SSE 连接复用、通知缓存、分页加载

### 📱 数据库设计
- **通知表 (notifications)**：
  - 支持用户隔离、类型分类、优先级管理
  - JSON 字段存储扩展数据
  - 自动过期机制和软删除支持
  - 完善的索引设计，支持高效查询

## [2.0.5] - 2025-10-13

### Added
- 未登录状态下的菜单项访问控制
  - 导入配置、导出配置、会话管理、导航菜单等功能在未登录时自动禁用
  - 登录/登出时自动更新菜单状态
- 优化后端日志输出
  - 禁用 MyBatis 详细 SQL 日志，提升性能
  - 调整日志级别，减少不必要的输出

### Changed
- 图标资源路径优化
  - 修复打包后图标显示为空白的问题
  - 支持开发和生产环境的图标路径自动切换
  - 添加多平台图标配置（Windows/macOS/Linux）

### Security
- **重要安全改进**：优化前端日志输出
  - 生产环境完全禁用 API 请求/响应日志，防止敏感信息泄露
  - 开发环境对敏感字段（密码等）进行脱敏处理
  - 登录/注册请求的密码字段自动替换为 `***`
  - 减少控制台输出，提升用户体验和应用性能

### Removed
- 移除统计信息功能模块
  - 删除前端统计信息组件和相关代码
  - 删除后端统计信息相关 API、Service、Mapper
  - 从菜单和命令面板中移除统计信息入口

### Fixed
- 修复 node-pty 原生模块编译问题
  - 解决 Windows 上 GetCommitHash.bat 脚本调用失败
  - 成功构建并打包 Electron 应用
- 修复会话重启加载速度慢的问题
  - 优化 MyBatis 日志配置
  - 提升数据库查询性能

## [2.0.4] - 2025-10-12

### Changed
- 优化菜单项命名为开发者友好格式
- 优化终端标签页与终端黑框间距

### Fixed
- 修复全屏终端关闭后界面空白
- 修复全屏模式下终端底部空白
- 修复全屏和非全屏模式下间距问题

## [2.0.3] - 2025-10-10

### Added
- Provider、Token、Session 核心功能完整实现
- 终端全屏模式和字体缩放
- 国际化支持（中英文）
- 系统托盘功能
- 智能Token切换和错误恢复
- 配置导入导出
- 命令面板 (Ctrl+K)

### Changed
- 完成从 CLI 工具到桌面应用的重构

## [1.0.0] - 2025-09-01

### Added
- 初始版本发布
- 基础 CLI 功能实现
